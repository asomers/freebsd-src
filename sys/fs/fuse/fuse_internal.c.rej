@@ -911,26 +958,8 @@
 		fao->attr.mtime = old_mtime.tv_sec;
 		fao->attr.mtimensec = old_mtime.tv_nsec;
 	}
-	if (vnode_isreg(vp) &&
-	    fvdat->cached_attrs.va_size != VNOVAL &&
-	    fao->attr.size != fvdat->cached_attrs.va_size) {
-		/*
-		 * The server changed the file's size even though we had it
-		 * cached!  That's a server bug.
-		 */
-		struct mount *mp = vnode_mount(vp);
-		struct fuse_data *data = fuse_get_mpdata(mp);
-
-		fuse_warn(data, FSESS_WARN_CACHE_INCOHERENT,
-		    "cache incoherent!  "
-		    "To prevent data corruption, disable the data cache "
-		    "by mounting with -o direct_io, or as directed "
-		    "otherwise by your FUSE server's documentation.");
-		int iosize = fuse_iosize(vp);
-		v_inval_buf_range(vp, 0, INT64_MAX, iosize);
-	}
 	fuse_internal_cache_attrs(vp, &fao->attr, fao->attr_valid,
-		fao->attr_valid_nsec, vap);
+		fao->attr_valid_nsec, vap, true);
 	if (vtyp != vnode_vtype(vp)) {
 		fuse_internal_vnode_disappear(vp);
 		err = ENOENT;
